{
  "name" : "job-moth_dq_bronze",
  "jobMode" : "VISUAL",
  "description" : "",
  "role" : "arn:aws:iam::730403633270:role/service-role/AWSGlueServiceRole",
  "executionProperty" : {
    "maxConcurrentRuns" : 1
  },
  "command" : {
    "name" : "glueetl",
    "scriptLocation" : "s3://aws-glue-assets-730403633270-eu-west-2/scripts/job-moth_dq_bronze.py",
    "pythonVersion" : "3"
  },
  "defaultArguments" : {
    "--enable-metrics" : "true",
    "--enable-spark-ui" : "true",
    "--spark-event-logs-path" : "s3://aws-glue-assets-730403633270-eu-west-2/sparkHistoryLogs/",
    "--enable-job-insights" : "true",
    "--enable-observability-metrics" : "true",
    "--enable-glue-datacatalog" : "true",
    "--enable-continuous-cloudwatch-log" : "true",
    "--job-bookmark-option" : "job-bookmark-disable",
    "--job-language" : "python",
    "--TempDir" : "s3://aws-glue-assets-730403633270-eu-west-2/temporary/"
  },
  "maxRetries" : 0,
  "allocatedCapacity" : 10,
  "timeout" : 2880,
  "maxCapacity" : 10.0,
  "glueVersion" : "4.0",
  "numberOfWorkers" : 10,
  "workerType" : "G.1X",
  "executionClass" : "STANDARD",
  "codeGenConfigurationNodes" : "{\"node-1733324792417\":{\"SparkSQL\":{\"Inputs\":[\"node-1732620047815\"],\"Name\":\"Add date Failed_Records\",\"OutputSchemas\":[{\"Columns\":[{\"Name\":\"health_psychological_symptoms\",\"Type\":\"string\"},{\"Name\":\"respondent_birth_place\",\"Type\":\"string\"},{\"Name\":\"end_interview_1\",\"Type\":\"string\"},{\"Name\":\"family_introduction\",\"Type\":\"string\"},{\"Name\":\"camp_name\",\"Type\":\"string\"},{\"Name\":\"deviceid\",\"Type\":\"string\"},{\"Name\":\"reintegration_preference_reason\",\"Type\":\"string\"},{\"Name\":\"pss_interest\",\"Type\":\"string\"},{\"Name\":\"photo_children\",\"Type\":\"string\"},{\"Name\":\"camp_arrival_month\",\"Type\":\"string\"},{\"Name\":\"health_physical_treated\",\"Type\":\"string\"},{\"Name\":\"campidcard_caseid\",\"Type\":\"string\"},{\"Name\":\"DataQualityEvaluationResult\",\"Type\":\"string\"},{\"Name\":\"respondent_nationality_second\",\"Type\":\"string\"},{\"Name\":\"formhub/uuid\",\"Type\":\"string\"},{\"Name\":\"_tags\",\"Type\":\"string\"},{\"Name\":\"respondent_name_last\",\"Type\":\"string\"},{\"Name\":\"accuracy_request\",\"Type\":\"string\"},{\"Name\":\"respondent_name_other\",\"Type\":\"string\"},{\"Name\":\"camp_occupation_other\",\"Type\":\"string\"},{\"Name\":\"final_instructions\",\"Type\":\"string\"},{\"Name\":\"prewar_occupation\",\"Type\":\"string\"},{\"Name\":\"DataQualityRulesSkip\",\"Type\":\"array<null>\"},{\"Name\":\"_notes\",\"Type\":\"string\"},{\"Name\":\"prewar_occupation_yes_no\",\"Type\":\"string\"},{\"Name\":\"gps_coordinates\",\"Type\":\"string\"},{\"Name\":\"_submission_time\",\"Type\":\"string\"},{\"Name\":\"consent_request\",\"Type\":\"string\"},{\"Name\":\"respondent_birth_date\",\"Type\":\"string\"},{\"Name\":\"campidcard_cardnumber\",\"Type\":\"string\"},{\"Name\":\"end_interview_3\",\"Type\":\"string\"},{\"Name\":\"respondent_name_first\",\"Type\":\"string\"},{\"Name\":\"children_number\",\"Type\":\"string\"},{\"Name\":\"_attachments\",\"Type\":\"string\"},{\"Name\":\"DataQualityRulesFail\",\"Type\":\"array<string>\"},{\"Name\":\"interviewer_feedback_notes\",\"Type\":\"string\"},{\"Name\":\"photo_question\",\"Type\":\"string\"},{\"Name\":\"camp_arrival_year\",\"Type\":\"string\"},{\"Name\":\"prewar_residence_place\",\"Type\":\"string\"},{\"Name\":\"DataQualityRulesPass\",\"Type\":\"array<string>\"},{\"Name\":\"interview_conclusion\",\"Type\":\"string\"},{\"Name\":\"camp_occupation_yes_no\",\"Type\":\"string\"},{\"Name\":\"health_physical_untreated\",\"Type\":\"string\"},{\"Name\":\"wives_number\",\"Type\":\"string\"},{\"Name\":\"respondent_nationality_first\",\"Type\":\"string\"},{\"Name\":\"_status\",\"Type\":\"string\"},{\"Name\":\"health_physical_symptoms\",\"Type\":\"string\"},{\"Name\":\"respondent_comprehension\",\"Type\":\"string\"},{\"Name\":\"respondent_birth_country\",\"Type\":\"string\"},{\"Name\":\"consent_understood\",\"Type\":\"string\"},{\"Name\":\"__version__\",\"Type\":\"string\"},{\"Name\":\"interviewer_username\",\"Type\":\"string\"},{\"Name\":\"consent_signature\",\"Type\":\"string\"},{\"Name\":\"consent_date\",\"Type\":\"string\"},{\"Name\":\"other_relatives_yes_no\",\"Type\":\"string\"},{\"Name\":\"departure_month\",\"Type\":\"string\"},{\"Name\":\"_validation_status\",\"Type\":\"string\"},{\"Name\":\"end_interview_2\",\"Type\":\"string\"},{\"Name\":\"prewar_residence_country\",\"Type\":\"string\"},{\"Name\":\"reintegration_preference\",\"Type\":\"string\"},{\"Name\":\"departure_year\",\"Type\":\"string\"},{\"Name\":\"respondent_nationality_differentatbirth_yes_no\",\"Type\":\"string\"},{\"Name\":\"campidcard_yes_no\",\"Type\":\"string\"},{\"Name\":\"_xform_id_string\",\"Type\":\"string\"},{\"Name\":\"_submission_time_date\",\"Type\":\"string\"},{\"Name\":\"consent_rejection_reason\",\"Type\":\"string\"},{\"Name\":\"education\",\"Type\":\"string\"},{\"Name\":\"health_psychological_treated\",\"Type\":\"string\"},{\"Name\":\"respondent_comfort\",\"Type\":\"string\"},{\"Name\":\"_geolocation\",\"Type\":\"string\"},{\"Name\":\"interview_introduction\",\"Type\":\"string\"},{\"Name\":\"children_yes_no\",\"Type\":\"string\"},{\"Name\":\"photo_respondent\",\"Type\":\"string\"},{\"Name\":\"camp_occupation\",\"Type\":\"string\"},{\"Name\":\"respondent_nationality_atbirth\",\"Type\":\"string\"},{\"Name\":\"relatives_number\",\"Type\":\"string\"},{\"Name\":\"pre_interview_instructions\",\"Type\":\"string\"},{\"Name\":\"post_interview_instructions\",\"Type\":\"string\"},{\"Name\":\"end\",\"Type\":\"string\"},{\"Name\":\"health_psychological_untreated\",\"Type\":\"string\"},{\"Name\":\"prewar_residence_province\",\"Type\":\"string\"},{\"Name\":\"start\",\"Type\":\"string\"},{\"Name\":\"_id\",\"Type\":\"string\"},{\"Name\":\"marital_status\",\"Type\":\"string\"},{\"Name\":\"_submitted_by\",\"Type\":\"string\"},{\"Name\":\"respondent_gender\",\"Type\":\"string\"},{\"Name\":\"_uuid\",\"Type\":\"string\"},{\"Name\":\"meta/instanceID\",\"Type\":\"string\"},{\"Name\":\"dq_run_date\",\"Type\":\"date\"}]}],\"SqlAliases\":[{\"Alias\":\"failedRecords\",\"From\":\"node-1732620047815\"}],\"SqlQuery\":\"select *,\\ncurrent_date() as dq_run_date\\nfrom failedRecords\"}},\"node-1732619334943\":{\"SelectFromCollection\":{\"Index\":0,\"Inputs\":[\"node-1732618877745\"],\"Name\":\"rowLevelOutcomes\"}},\"node-1732704615612\":{\"S3GlueParquetTarget\":{\"AutoDataQuality\":{\"IsEnabled\":false},\"Compression\":\"snappy\",\"Inputs\":[\"node-1733324673835\"],\"Name\":\"Amazon S3\",\"PartitionKeys\":[[\"dq_run_date\"]],\"Path\":\"s3://tgsn-data-quality/kobo/Moth/rule-outcomes/\",\"SchemaChangePolicy\":{\"Database\":\"tgsn_data_quality\",\"EnableUpdateCatalog\":false,\"Table\":\"kobo_rule_outcomes\",\"UpdateBehavior\":\"UPDATE_IN_DATABASE\"}}},\"node-1732619338946\":{\"SelectFromCollection\":{\"Index\":0,\"Inputs\":[\"node-1732618877745\"],\"Name\":\"ruleOutcomes\"}},\"node-1732618831059\":{\"CatalogSource\":{\"Database\":\"tgsn_bronze\",\"Name\":\"Read From KoBo Bronze\",\"Table\":\"kobo_moth\"}},\"node-1732620047815\":{\"SelectFromCollection\":{\"Index\":0,\"Inputs\":[\"node-1732620047662\"],\"Name\":\"Failed_Records\"}},\"node-1732620208752\":{\"S3GlueParquetTarget\":{\"AutoDataQuality\":{\"IsEnabled\":false},\"Compression\":\"snappy\",\"Inputs\":[\"node-1733324792417\"],\"Name\":\"Amazon S3\",\"PartitionKeys\":[[\"dq_run_date\"]],\"Path\":\"s3://tgsn-data-quality/kobo/Moth/failed-records/\",\"SchemaChangePolicy\":{\"EnableUpdateCatalog\":false}}},\"node-1732618877745\":{\"EvaluateDataQualityMultiFrame\":{\"AdditionalDataSources\":{},\"AdditionalOptions\":{\"observations.scope\":\"ALL\",\"performanceTuning.caching\":\"CACHE_NOTHING\"},\"Inputs\":[\"node-1732618831059\"],\"Name\":\"Evaluate Data Quality\",\"PublishingOptions\":{\"CloudWatchMetricsEnabled\":true,\"ResultsPublishingEnabled\":true,\"ResultsS3Prefix\":\"\"},\"Ruleset\":\"# Example rules: Completeness \\\"colA\\\" between 0.4 and 0.8, ColumnCount > 10\\nRules = [\\n    IsPrimaryKey \\\"_id\\\",\\n    Uniqueness \\\"campidcard_cardnumber\\\" > 0.9,\\n    Completeness \\\"respondent_name_first\\\" > 0.9,\\n    Completeness \\\"respondent_name_last\\\" > 0.9\\n]\",\"StopJobOnFailureOptions\":{}}},\"node-1732620233014\":{\"S3GlueParquetTarget\":{\"AutoDataQuality\":{\"EvaluationContext\":\"EvaluateDataQuality_node1733324926663\",\"IsEnabled\":true},\"Compression\":\"snappy\",\"Inputs\":[\"node-1733324855871\"],\"Name\":\"Amazon S3\",\"PartitionKeys\":[[\"dq_run_date\"]],\"Path\":\"s3://tgsn-data-quality/kobo/Moth/passed-records/\",\"SchemaChangePolicy\":{\"EnableUpdateCatalog\":false}}},\"node-1733324673835\":{\"SparkSQL\":{\"Inputs\":[\"node-1732619338946\"],\"Name\":\"Add date ruleOutcome\",\"OutputSchemas\":[{\"Columns\":[{\"Name\":\"Rule\",\"Type\":\"string\"},{\"Name\":\"Outcome\",\"Type\":\"string\"},{\"Name\":\"FailureReason\",\"Type\":\"string\"},{\"Name\":\"EvaluatedMetrics\",\"Type\":\"struct<string:double>\"},{\"Name\":\"EvaluatedRule\",\"Type\":\"string\"},{\"Name\":\"dq_run_date\",\"Type\":\"date\"}]}],\"SqlAliases\":[{\"Alias\":\"myDataSource\",\"From\":\"node-1732619338946\"}],\"SqlQuery\":\"select *,\\ncurrent_date() as dq_run_date\\nfrom myDataSource\"}},\"node-1732620047662\":{\"Route\":{\"GroupFiltersList\":[{\"Filters\":[],\"GroupName\":\"default_group\",\"LogicalOperator\":\"AND\"},{\"Filters\":[{\"Negated\":false,\"Operation\":\"REGEX\",\"Values\":[{\"Type\":\"CONSTANT\",\"Value\":[\"Failed\"]},{\"Type\":\"COLUMNEXTRACTED\",\"Value\":[\"DataQualityEvaluationResult\"]}]}],\"GroupName\":\"Failed_Records\",\"LogicalOperator\":\"AND\"}],\"Inputs\":[\"node-1732619334943\"],\"Name\":\"Conditional Router\"}},\"node-1732620047793\":{\"SelectFromCollection\":{\"Index\":0,\"Inputs\":[\"node-1732620047662\"],\"Name\":\"default_group\"}},\"node-1733324855871\":{\"SparkSQL\":{\"Inputs\":[\"node-1732620047793\"],\"Name\":\"Add date default_group\",\"OutputSchemas\":[{\"Columns\":[{\"Name\":\"health_psychological_symptoms\",\"Type\":\"string\"},{\"Name\":\"respondent_birth_place\",\"Type\":\"string\"},{\"Name\":\"end_interview_1\",\"Type\":\"string\"},{\"Name\":\"family_introduction\",\"Type\":\"string\"},{\"Name\":\"camp_name\",\"Type\":\"string\"},{\"Name\":\"deviceid\",\"Type\":\"string\"},{\"Name\":\"reintegration_preference_reason\",\"Type\":\"string\"},{\"Name\":\"pss_interest\",\"Type\":\"string\"},{\"Name\":\"photo_children\",\"Type\":\"string\"},{\"Name\":\"camp_arrival_month\",\"Type\":\"string\"},{\"Name\":\"health_physical_treated\",\"Type\":\"string\"},{\"Name\":\"campidcard_caseid\",\"Type\":\"string\"},{\"Name\":\"DataQualityEvaluationResult\",\"Type\":\"string\"},{\"Name\":\"respondent_nationality_second\",\"Type\":\"string\"},{\"Name\":\"formhub/uuid\",\"Type\":\"string\"},{\"Name\":\"_tags\",\"Type\":\"string\"},{\"Name\":\"respondent_name_last\",\"Type\":\"string\"},{\"Name\":\"accuracy_request\",\"Type\":\"string\"},{\"Name\":\"respondent_name_other\",\"Type\":\"string\"},{\"Name\":\"camp_occupation_other\",\"Type\":\"string\"},{\"Name\":\"final_instructions\",\"Type\":\"string\"},{\"Name\":\"prewar_occupation\",\"Type\":\"string\"},{\"Name\":\"DataQualityRulesSkip\",\"Type\":\"array<null>\"},{\"Name\":\"_notes\",\"Type\":\"string\"},{\"Name\":\"prewar_occupation_yes_no\",\"Type\":\"string\"},{\"Name\":\"gps_coordinates\",\"Type\":\"string\"},{\"Name\":\"_submission_time\",\"Type\":\"string\"},{\"Name\":\"consent_request\",\"Type\":\"string\"},{\"Name\":\"respondent_birth_date\",\"Type\":\"string\"},{\"Name\":\"campidcard_cardnumber\",\"Type\":\"string\"},{\"Name\":\"end_interview_3\",\"Type\":\"string\"},{\"Name\":\"respondent_name_first\",\"Type\":\"string\"},{\"Name\":\"children_number\",\"Type\":\"string\"},{\"Name\":\"_attachments\",\"Type\":\"string\"},{\"Name\":\"DataQualityRulesFail\",\"Type\":\"array<null>\"},{\"Name\":\"interviewer_feedback_notes\",\"Type\":\"string\"},{\"Name\":\"photo_question\",\"Type\":\"string\"},{\"Name\":\"camp_arrival_year\",\"Type\":\"string\"},{\"Name\":\"prewar_residence_place\",\"Type\":\"string\"},{\"Name\":\"DataQualityRulesPass\",\"Type\":\"array<string>\"},{\"Name\":\"interview_conclusion\",\"Type\":\"string\"},{\"Name\":\"camp_occupation_yes_no\",\"Type\":\"string\"},{\"Name\":\"health_physical_untreated\",\"Type\":\"string\"},{\"Name\":\"wives_number\",\"Type\":\"string\"},{\"Name\":\"respondent_nationality_first\",\"Type\":\"string\"},{\"Name\":\"_status\",\"Type\":\"string\"},{\"Name\":\"health_physical_symptoms\",\"Type\":\"string\"},{\"Name\":\"respondent_comprehension\",\"Type\":\"string\"},{\"Name\":\"respondent_birth_country\",\"Type\":\"string\"},{\"Name\":\"consent_understood\",\"Type\":\"string\"},{\"Name\":\"__version__\",\"Type\":\"string\"},{\"Name\":\"interviewer_username\",\"Type\":\"string\"},{\"Name\":\"consent_signature\",\"Type\":\"string\"},{\"Name\":\"consent_date\",\"Type\":\"string\"},{\"Name\":\"other_relatives_yes_no\",\"Type\":\"string\"},{\"Name\":\"departure_month\",\"Type\":\"string\"},{\"Name\":\"_validation_status\",\"Type\":\"string\"},{\"Name\":\"end_interview_2\",\"Type\":\"string\"},{\"Name\":\"prewar_residence_country\",\"Type\":\"string\"},{\"Name\":\"reintegration_preference\",\"Type\":\"string\"},{\"Name\":\"departure_year\",\"Type\":\"string\"},{\"Name\":\"respondent_nationality_differentatbirth_yes_no\",\"Type\":\"string\"},{\"Name\":\"campidcard_yes_no\",\"Type\":\"string\"},{\"Name\":\"_xform_id_string\",\"Type\":\"string\"},{\"Name\":\"_submission_time_date\",\"Type\":\"string\"},{\"Name\":\"consent_rejection_reason\",\"Type\":\"string\"},{\"Name\":\"education\",\"Type\":\"string\"},{\"Name\":\"health_psychological_treated\",\"Type\":\"string\"},{\"Name\":\"respondent_comfort\",\"Type\":\"string\"},{\"Name\":\"_geolocation\",\"Type\":\"string\"},{\"Name\":\"interview_introduction\",\"Type\":\"string\"},{\"Name\":\"children_yes_no\",\"Type\":\"string\"},{\"Name\":\"photo_respondent\",\"Type\":\"string\"},{\"Name\":\"camp_occupation\",\"Type\":\"string\"},{\"Name\":\"respondent_nationality_atbirth\",\"Type\":\"string\"},{\"Name\":\"relatives_number\",\"Type\":\"string\"},{\"Name\":\"pre_interview_instructions\",\"Type\":\"string\"},{\"Name\":\"post_interview_instructions\",\"Type\":\"string\"},{\"Name\":\"end\",\"Type\":\"string\"},{\"Name\":\"health_psychological_untreated\",\"Type\":\"string\"},{\"Name\":\"prewar_residence_province\",\"Type\":\"string\"},{\"Name\":\"start\",\"Type\":\"string\"},{\"Name\":\"_id\",\"Type\":\"string\"},{\"Name\":\"marital_status\",\"Type\":\"string\"},{\"Name\":\"_submitted_by\",\"Type\":\"string\"},{\"Name\":\"respondent_gender\",\"Type\":\"string\"},{\"Name\":\"_uuid\",\"Type\":\"string\"},{\"Name\":\"meta/instanceID\",\"Type\":\"string\"},{\"Name\":\"dq_run_date\",\"Type\":\"date\"}]}],\"SqlAliases\":[{\"Alias\":\"defaultGroup\",\"From\":\"node-1732620047793\"}],\"SqlQuery\":\"select *,\\ncurrent_date() as dq_run_date\\nfrom defaultGroup\"}}}",
  "sourceControlDetails" : {
    "provider" : "GITHUB",
    "repository" : "aws-glue-etl",
    "branch" : "develop",
    "folder" : "job-moth_dq_bronze"
  }
}